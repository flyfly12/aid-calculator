<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Princeton Financial Aid Calculator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cleave.js/1.6.0/cleave.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        label { display: inline-block; width: 350px; }
        input { padding: 5px; width: 200px; }
        button { padding: 10px 20px; margin-top: 10px; }
        h1, h2 { color: #333; }
        p { margin: 5px 0; }
        .note { font-size: 0.9em; color: #666; }
    </style>
</head>
<body>
    <p class="note">
        This calculator estimates financial aid eligibility based on family income, assets, and number of undergraduate siblings in college. 
        The total cost of attendance is prepopulated with Princeton University's estimated cost for the 2024-25 academic year ($86,700). 
        You can adjust this value for other institutions.
    </p>
    <h1>Princeton Financial Aid Calculator</h1>
    <form id="aidForm">
        <label for="costOfAttendance">Total Cost of Attendance ($):</label>
        <input type="text" id="costOfAttendance" value="86700" required><br><br>
        
        <label for="income">Family Income ($):</label>
        <input type="text" id="income" required><br><br>
        
        <label for="assets">Family Assets ($):</label>
        <input type="text" id="assets" required><br><br>
        
        <label for="siblings">Number of Undergraduate Siblings in College (including the student):</label>
        <input type="number" id="siblings" min="1" required><br><br>
        
        <button type="button" onclick="calculateAid()">Calculate</button>
    </form>
    
    <p class="note">
        Note: This calculator provides an estimate based on simplified assumptions. Actual financial aid may differ due to additional factors considered by Princeton University.
    </p>
    
    <h2>Results</h2>
    <p id="totalContribution"></p>
    <p id="perChildContribution"></p>
    <p id="financialNeed"></p>
    <p id="eligibility"></p>
    
    <script>
        // Initialize cleave.js for formatted inputs
        const costOfAttendanceCleave = new Cleave('#costOfAttendance', {
            numeral: true,
            numeralThousandsGroupStyle: 'thousand',
            numeralDecimalScale: 0
        });
        const incomeCleave = new Cleave('#income', {
            numeral: true,
            numeralThousandsGroupStyle: 'thousand',
            numeralDecimalScale: 0
        });
        const assetsCleave = new Cleave('#assets', {
            numeral: true,
            numeralThousandsGroupStyle: 'thousand',
            numeralDecimalScale: 0
        });
        
        // Function to format numbers with commas and two decimal places
        function formatNumber(number) {
            return number.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        }
        
        function calculateAid() {
            // Get raw values from cleave.js inputs
            const costOfAttendance = parseFloat(costOfAttendanceCleave.getRawValue());
            const income = parseFloat(incomeCleave.getRawValue());
            const assets = parseFloat(assetsCleave.getRawValue());
            const siblings = parseInt(document.getElementById('siblings').value);
            
            // Validate inputs
            if (isNaN(costOfAttendance) || isNaN(income) || isNaN(assets) || isNaN(siblings) || siblings < 1) {
                alert('Please enter valid numbers in all fields. Number of siblings must be at least 1.');
                return;
            }
            
            // Calculate contributions
            const incomeContribution = Math.max(0, 0.25 * (income - 100000));
            const assetContribution = Math.max(0, 0.05 * (assets - 150000));
            const totalFamilyContribution = incomeContribution + assetContribution;
            const perChildContribution = totalFamilyContribution / siblings;
            const financialNeed = costOfAttendance - perChildContribution;
            
            // Display results with formatted numbers
            document.getElementById('totalContribution').innerText = 
                `Total Family Contribution: $${formatNumber(totalFamilyContribution)}`;
            document.getElementById('perChildContribution').innerText = 
                `Per-Child Contribution: $${formatNumber(perChildContribution)}`;
            document.getElementById('financialNeed').innerText = 
                `Financial Need: $${formatNumber(financialNeed)}`;
            
            if (financialNeed > 0) {
                document.getElementById('eligibility').innerText = 
                    `Eligible for Aid: Yes, approximately $${formatNumber(financialNeed)}`;
            } else {
                document.getElementById('eligibility').innerText = 
                    'Eligible for Aid: No';
            }
        }
    </script>
</body>
</html>
